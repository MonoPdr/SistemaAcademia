<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Detalhes do Treino</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/painel.css">
</head>
<body>
    <div class="panel-container" style="width: 550px;">
        <h1 th:text="${treino?.descricaoTreino}">Nome do Treino</h1>
        <p th:text="|Nível: ${treino?.nivelDificuldade}, Duração: ${treino?.duracaoMinutos} min|">Detalhes</p>

        <hr class="divider">
        
        <h2>Exercícios do Treino</h2>
        <div class="styled-list">
            <div th:each="item : ${treino.listaExercicios}" 
                 th:if="${item != null && item.exercicio != null}"
                 class="exercise-list-item">
                <span class="name" th:text="${item.exercicio.nome}">Nome do Exercício</span>
                <span class="details" th:text="|${item.numSeries} séries de ${item.numRepeticoes} repetições|">3x12</span>
            </div>
        </div>

        <div sec:authorize="hasRole('INSTRUTOR')">
            <hr class="divider">
            
            <h2>Adicionar Novo Exercício</h2>
            <form th:action="@{/treinos/{treinoId}/adicionar-exercicio(treinoId=${treino.id})}" method="post">
                <div class="form-grid">
                    <div class="full-width">
                        <label for="exercicioNome">Exercício</label>
                        <input list="exercicios-lista" id="exercicioNome" name="exercicioNome" placeholder="Digite para buscar..." required>
                        <datalist id="exercicios-lista">
                            <option th:each="exercicio : ${todosExercicios}" th:value="${exercicio.nome}"></option>
                        </datalist>
                    </div>

                    <div>
                        <label for="series">Séries</label>
                        <input type="number" id="series" name="series" required>
                    </div>
                    
                    <div>
                        <label for="repeticoes">Repetições</label>
                        <input type="number" id="repeticoes" name="repeticoes" required>
                    </div>
                    
                    <button type="submit">Adicionar Exercício</button>
                </div>
            </form>
        </div>
        
        <hr class="divider">

        <a sec:authorize="hasRole('INSTRUTOR')" th:if="${treino.aluno != null}" th:href="@{/alunos/{id}(id=${treino.aluno.id})}" class="register-link">
            Concluir e Voltar para Aluno
        </a>
        <a sec:authorize="hasRole('ALUNO')" th:href="@{/alunos/painel}" class="register-link">
            Voltar ao Meu Painel
        </a>
    </div>
</body>
</html>